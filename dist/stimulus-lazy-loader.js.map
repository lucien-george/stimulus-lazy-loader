{"version":3,"file":"stimulus-lazy-loader.js","sources":["../src/index.js"],"sourcesContent":["import { Controller } from 'stimulus';\n\nexport default class extends Controller {\n  static targets = [ 'image', 'root' ];\n  static values = {\n    rootMargin: String,\n    threshold: Array\n  }\n\n  connect() {\n    const observer = new IntersectionObserver(\n    (entries, observer) => {\n      entries.forEach(entry => {\n        entry.target.src = entry.target.dataset.src;\n        observer.unobserve(entry.target);\n      });\n    },\n    { root: this.root, rootMargin: this.rootMargin, threshold: this.threshold });\n    this.imageTargets.forEach(target => observer.observe(target));\n  }\n\n  get rootMargin() {\n    return this.hasRootMarginValue ? this.rootMarginValue : \"0px\";\n  }\n\n  get root() {\n    return this.hasRootTarget ? this.rootTarget : null;\n  }\n\n  get threshold() {\n    return this.hasThresHoldValue ? this.thresholdValue : [ 0.0 ];\n  }\n}\n"],"names":["connect","observer","IntersectionObserver","entries","forEach","entry","target","src","dataset","unobserve","root","this","rootMargin","threshold","imageTargets","observe","hasRootMarginValue","rootMarginValue","hasRootTarget","rootTarget","hasThresHoldValue","thresholdValue","targets","values","String","Array"],"mappings":"6QASEA,QAAA,WACE,IAAMC,EAAW,IAAIC,qBACrB,SAACC,EAASF,GACRE,EAAQC,QAAQ,SAAAC,GACdA,EAAMC,OAAOC,IAAMF,EAAMC,OAAOE,QAAQD,IACxCN,EAASQ,UAAUJ,EAAMC,WAG7B,CAAEI,KAAMC,KAAKD,KAAME,WAAYD,KAAKC,WAAYC,UAAWF,KAAKE,YAChEF,KAAKG,aAAaV,QAAQ,SAAAE,UAAUL,EAASc,QAAQT,gCAGvD,WACE,YAAYU,mBAAqBL,KAAKM,gBAAkB,wBAG1D,WACE,YAAYC,cAAgBP,KAAKQ,WAAa,4BAGhD,WACE,YAAYC,kBAAoBT,KAAKU,eAAiB,CAAE,iOA3BnDC,QAAU,CAAE,QAAS,UACrBC,OAAS,CACdX,WAAYY,OACZX,UAAWY"}